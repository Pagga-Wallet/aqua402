# ============================================
# ClickHouse Pagga Database Configuration
# ============================================

# Database Configuration
CLICKHOUSE_DATABASE=pagga_data

# User Credentials (SECURE PASSWORDS - Change in production!)
CLICKHOUSE_ADMIN_USER=admin
CLICKHOUSE_ADMIN_PASSWORD=CH_S3cur3_2025_Admin_PAGGA_987
CLICKHOUSE_DEFAULT_PASSWORD=CH_D3fault_2025_User_PAGGA_456

# ZooKeeper Configuration
ZOOKEEPER_HOSTS=zookeeper:2181
ZOO_MY_ID=1
ZOO_SERVERS=server.1=0.0.0.0:2888:3888;2181

# Migration Service Configuration  
MIGRATION_MODE=full
MIGRATIONS_PATH=/app/migrations

# ClickHouse Connection
# IMPORTANT: Migration Service connects through HAProxy, not directly to nodes!
CLICKHOUSE_HOST=haproxy

# Security Settings
CLICKHOUSE_DEFAULT_ACCESS_MANAGEMENT=1
CLICKHOUSE_USER_DEFAULT_ROLE=admin

# Performance Settings
CLICKHOUSE_MAX_MEMORY_USAGE=10000000000
CLICKHOUSE_MAX_EXECUTION_TIME=14400
CLICKHOUSE_CONNECT_TIMEOUT=600
CLICKHOUSE_SEND_TIMEOUT=600
CLICKHOUSE_RECEIVE_TIMEOUT=600

# Cluster Configuration
CLICKHOUSE_INTERSERVER_HTTP_PORT=9009
CLICKHOUSE_HTTP_PORT=8123
CLICKHOUSE_PORT=9000

# Container Names
CLICKHOUSE_1_CONTAINER=pagga-clickhouse-1
CLICKHOUSE_2_CONTAINER=pagga-clickhouse-2
CLICKHOUSE_3_CONTAINER=pagga-clickhouse-3
CLICKHOUSE_4_CONTAINER=pagga-clickhouse-4
MIGRATION_SERVICE_1_CONTAINER=migration-service-1
MIGRATION_SERVICE_2_CONTAINER=migration-service-2
ZOOKEEPER_CONTAINER=zookeeper

# Health Check Settings
HEALTHCHECK_INTERVAL=30s
HEALTHCHECK_TIMEOUT=10s
HEALTHCHECK_RETRIES=3
HEALTHCHECK_START_PERIOD=60s

# Restart Policy
RESTART_POLICY=unless-stopped

# Migration Service Settings
MIGRATION_AGE_DAYS=6
HOT_TTL_DAYS=8
DAILY_TTL_DAYS=30
MAX_CONCURRENT_TASKS=5

# ZooKeeper Paths
ZK_ROOT_PATH=/migration-service
ZK_APPLIED_MIGRATIONS_PATH=/migration-service/applied-migrations
ZK_SCHEMA_LOCKS_PATH=/migration-service/schema-locks
ZK_NODES_PATH=/migration-service/nodes
ZK_LEADER_PATH=/migration-service/leader

# Logging
LOG_LEVEL=INFO
